## 拷贝控制

### 1. 拷贝控制操作

`拷贝和移动构造函数` 定义了当用同类型的另一个对象 **初始化** 本对象时做什么。`拷贝和移动赋值运算符` 定义了将一个对象 **赋予** 同类型的另一个对象时做什么。`析构函数` 定义了当此类型对象销毁时做什么。

### 2. 如何拷贝

对于类类型的成员，会使用其拷贝构造函数来拷贝；内置类型的成员则直接拷贝。

### 3. 拷贝构造函数

如果一个构造函数的第一个参数是自身类型的引用，且任何额外参数都有默认值，则此构造函数是 **拷贝构造函数** 。

```c++
class Foo {
public:
    Foo();	//默认构造函数
    Foo(const &Foo);	//拷贝构造函数，自身类型引用参数一般是const引用
}
```

#### 合成拷贝构造函数

如果没有为一个类定义拷贝构造函数，编译器会定义一个。合成拷贝构造函数会将其参数的成员逐个拷贝到正在创建的对象中。

#### 拷贝初始化

直接初始化与拷贝初始化之间的 **差异** ：`直接初始化` 要求编译器使用普通函数匹配来选择构造函数；`拷贝初始化` 则是要求编译器将右侧运算对象拷贝到正在创建的对象中，如需要还要进行类型转换。拷贝初始化通过 `拷贝构造函数` 或 `移动构造函数` 来完成。

```c++
//直接初始化
string dots(10, '.');
string s(dots);
//拷贝初始化
string s2 = dots;
string isbn = "9-999-999";
string nines = string(10, '9');
```

拷贝初始化在下列情况也会发生：

- 将一个对象作为实参传递给一个非引用类型的形参
- 从一个返回类型为非引用类型的函数返回一个对象
- 用花括号列表初始化一个数组中的元素或一个聚合类中的成员
- 某些类类型会对它们所分配的对象使用拷贝初始化，如初始化标准库容器或调用insert、push_back成员函数（emplace不同，它是进行直接初始化）。





